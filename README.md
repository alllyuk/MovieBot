# MovieBot

Telegram-бот для выбора фильмов на вечер. Помогает парам/семьям вести списки желаемых фильмов и выбирать что посмотреть вместе.

## Возможности

- Каждый ведёт свой список "хочу посмотреть"
- Бот находит пересечение списков (фильмы которые хотят все)
- Случайный выбор из пересечения или общего списка
- История просмотров с оценками
- Умный выбор: не предлагает просмотренные и не повторяет последний

## Команды

| Команда | Описание |
|---------|----------|
| `/start` | Начать работу с ботом |
| `/help` | Показать справку |
| `хочу посмотреть [название]` | Добавить фильм |
| `мой список` | Показать свой список |
| `наш список` | Фильмы которые хотят все |
| `что смотрим?` | Выбрать фильм на вечер |
| `посмотрели [название], [оценка]` | Отметить просмотр |
| `история` | История просмотров |
| `удали [название]` | Удалить из списка |

## Технический стек

- **Python 3.10+**
- **aiogram 3.x** - Telegram Bot API
- **SQLite** - хранение данных
- **pytest-bdd** - BDD тестирование

## Архитектура

```
src/
├── bot/handlers/    # Обработчики команд (тонкий слой)
├── services/        # Бизнес-логика (без зависимости от Telegram)
├── database/        # SQLite + репозитории
└── utils/           # Парсер команд, форматирование дат
```

## Установка

```bash
# Клонировать репозиторий
git clone https://github.com/YOUR_USERNAME/MovieBot.git
cd MovieBot

# Создать виртуальное окружение
python -m venv venv
venv\Scripts\activate     # Windows
source venv/bin/activate  # Linux/Mac

# Установить зависимости
pip install -r requirements.txt

# Настроить токен бота
cp .env.example .env
# Отредактировать .env и добавить BOT_TOKEN
```

## Запуск

```bash
python -m src.main
```

## Тестирование

```bash
# Все тесты
pytest tests/ -v

# С покрытием
pytest tests/ --cov=src
```

## Лицензия

MIT
